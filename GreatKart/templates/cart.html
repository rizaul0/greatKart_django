{% extends 'base_template.html' %}
{% load static %}

{% block content %}

<section class="section-content padding-y bg">
<div class="container">

<div class="row">
	<!-- CART ITEMS -->
	 
	<aside class="col-lg-9">
		<div class="card">
			
			
			<table class="table table-borderless table-shopping-cart">
				<thead class="text-muted">
			{% if cart_items %}
					<tr class="small text-uppercase">
						<th scope="col">Product</th>
						<th scope="col">variant</th>
						<th scope="col" width="120">Quantity</th>
						<th scope="col" width="120">Price</th>
						<th scope="col" class="text-right" width="200"></th>
					</tr>
				</thead>

				<tbody>
			

				<!-- ITEM 1 -->
                    {% for cart_item in cart_items %}
				<tr>
                    
					<td>
						<figure class="itemside align-items-center">
							<div class="aside">
								<img src="{{ cart_item.product.image.url }}" class="img-sm">
							</div>
							<figcaption class="info">
								<a href="{% url 'product_detail' cart_item.product.category.slug cart_item.product.slug %}" class="title text-dark stretched-link">{{ cart_item.product.brand_name }}</a>
								<p class="text-muted small">{{ cart_item.product.product_name }} <br> {{ cart_item.product.description }}</p>
							</figcaption>
						</figure>
					</td>
					
					<td>
						<figure class="itemside align-items-center">
							
							<figcaption class="info">
								<a href="{% url 'product_detail' cart_item.product.category.slug cart_item.product.slug %}" class="title text-dark stretched-link">
									{% if cart_item.variation.all %}
                                       {% for variant in cart_item.variation.all %}
											{{ variant.variant_value }}
										{% endfor %}
									{% endif %}
							</figcaption>
						</figure>
					</td>
                    
					<td>
						<div class="input-group input-spinner">

							<div class="input-group-prepend">
							<a class="btn btn-light"
								href="{% url 'remove_cart_item' cart_item.id %}">
								<i class="fa fa-minus"></i>
							</a>
							</div>

							<input type="text" class="form-control text-center"
								value="{{ cart_item.quantity }}" readonly>

							<div class="input-group-append">
							<a class="btn btn-light"
								href="{% url 'increment_cart_item' cart_item.id %}">
								<i class="fa fa-plus"></i>
							</a>
							</div>

						</div>
					</td>


					<td>
						<div class="price-wrap">
							<var class="price">₹{{ cart_item.sub_total }}</var>
							<small class="text-muted">₹{{ cart_item.product.price }} each</small>
						</div>
					</td>

					<td class="text-right">
						<a href="{% url 'remove_cart' cart_item.id %}" class="btn btn-danger">Remove</a>
					</td>
				</tr>
                {% endfor %}
			{% else %}
				<tr>
					<td colspan="4" class="text-center">
						<h4>Your cart is empty.</h4>
						<a href="{% url 'store' %}" class="btn btn-primary mt-3">Continue Shopping</a>
					</td>
				</tr>
			{% endif %}

				<!-- ITEM 2 -->
				

				</tbody>
			</table>
		</div>
	</aside>

	<!-- SUMMARY -->
	<aside class="col-lg-3">
		<div class="card">
			<div class="card-body">
				<dl class="dlist-align">
					<dt>Total price:</dt>
					<dd class="text-right">₹{{ total }}</dd>
				</dl>
				<dl class="dlist-align">
					<dt>Tax:</dt>
					<dd class="text-right">₹{{ tax }}</dd>
				</dl>
				<dl class="dlist-align">
					<dt>Total:</dt>
					<dd class="text-right text-dark b"><strong>₹{{ grand_total }}</strong></dd>
				</dl>

				<hr>

				<p class="text-center mb-3">
					<img src="{% static 'images/misc/payments.png' %}" height="26">
				</p>

				<a href="{% url 'place_order' %}" class="btn btn-primary btn-block">Checkout</a>
				<a href="{% url 'store' %}" class="btn btn-light btn-block">Continue Shopping</a>
			</div>
		</div>
	</aside>

</div>
</div>
</section>

{% endblock %}
